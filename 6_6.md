<p class="has-line-data" data-line-start="0" data-line-end="6">Задача 1<br>
Перед выполнением задания ознакомьтесь с документацией по администрированию MongoDB.<br>
Пользователь (разработчик) написал в канал поддержки, что у него уже 3 минуты происходит CRUD операция в MongoDB и её нужно прервать.<br>
Вы как инженер поддержки решили произвести данную операцию:<br>
напишите список операций, которые вы будете производить для остановки запроса пользователя<br>
предложите вариант решения проблемы с долгими (зависающими) запросами в MongoDB</p>
<pre><code>Получить список операциий, при необходимости использовать вызов с параметрами:
db.currentOp()
Завершить нужную операцию по opid
db.killOp()
Для анализа долгих запросов explicit. 
Как вариант постороить/перестроить индекс статистику или изменить запрос.
</code></pre>
<p class="has-line-data" data-line-start="14" data-line-end="16">Задача 2<br>
Перед выполнением задания познакомьтесь с документацией по Redis latency troobleshooting.</p>
<p class="has-line-data" data-line-start="17" data-line-end="22">Вы запустили инстанс Redis для использования совместно с сервисом, который использует механизм TTL. Причем отношение количества записанных key-value значений к количеству истёкших значений есть величина постоянная и увеличивается пропорционально количеству реплик сервиса.<br>
При масштабировании сервиса до N реплик вы увидели, что:<br>
сначала рост отношения записанных значений к истекшим<br>
Redis блокирует операции записи<br>
Как вы думаете, в чем может быть проблема?</p>
<pre><code>Как вариант недостаток оперативной памяти.
</code></pre>
<p class="has-line-data" data-line-start="25" data-line-end="31">Задача 3<br>
Перед выполнением задания познакомьтесь с документацией по Common Mysql errors.<br>
Вы подняли базу данных MySQL для использования в гис-системе. При росте количества записей, в таблицах базы, пользователи начали жаловаться на ошибки вида:<br>
InterfaceError: (InterfaceError) 2013: Lost connection to MySQL server during query u’SELECT…<br>
Как вы думаете, почему это начало происходить и как локализовать проблему?<br>
Какие пути решения данной проблемы вы можете предложить?</p>
<pre><code>Очень долгое выполнении запроса.
Как вариант, можно попробовать:
Изменить значение параметров connect_timeout, interactive_timeout, wait_timeout;
Оптимизировать запросы (создать индексы, переписать запросы (определить по плану запросов));
добавить ресурсов на машине;
перевести задачу Microsoft SQL 2019 c активным логом в оперативной памяти до 1 000000 IOPS на одном сервере.
увеличивать net_read_timeout в случае плохой сети.
</code></pre>
<p class="has-line-data" data-line-start="39" data-line-end="46">Задача 4<br>
Перед выполнением задания ознакомтесь со статьей Common PostgreSQL errors из блога Percona.<br>
Вы решили перевести гис-систему из задачи 3 на PostgreSQL, так как прочитали в документации, что эта СУБД работает с большим объемом данных лучше, чем MySQL.<br>
После запуска пользователи начали жаловаться, что СУБД время от времени становится недоступной. В dmesg вы видите, что:<br>
postmaster invoked oom-killer<br>
Как вы думаете, что происходит?<br>
Как бы вы решили данную проблему?</p>
<pre><code>Причина в нехватке памяти. При возникновении нехватки памяти oom-killer убивает самый жирный процесс чтобы не допустить kernel panic. ООМ каждому процессу выставляет оценку(oom_score) и на основании этой оценки выбирает себе жертву.
Для предотвращения такой ситуации можно выставить ограничения в Postgres на использование ресурсов хоста, так же можно понизить рейтинг процесса postgres, чтобы уменьшить вероятность его попадания под oom-killer.</code></pre>
